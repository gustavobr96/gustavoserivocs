@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model SistemaBico.Web.Models.Reponse.ProfileWorkerProfessionalPaginationResponse;
@{
    Layout = "~/Views/Shared/_layout.cshtml";
}

@section Head{
    <link href="assets/css/testemunhal.css" rel="stylesheet" />
}
    <div class="d-flex flex-column-fluid">
        <!--begin::Container-->
        <div class="container-fluid">
            <!--begin::Card-->
            <div class="card card-custom gutter-b">
                <div class="card-body">
                    <!--begin::Details-->
                    <div class="d-flex mb-12">
                        <!--begin: Pic-->
                        <div class="flex-shrink-0 mr-7 mt-lg-0 mt-3">
                            <div class="symbol symbol-50 symbol-lg-120">
                                <img src="data:image/png;base64, @Model.ProfessionalProfile.PerfilPicture" alt="image" />

                            </div>
                            <div class="symbol symbol-50 symbol-lg-120 symbol-primary d-none">
                                <span class="font-size-h3 symbol-label font-weight-boldest"></span>
                            </div>
                        </div>
                        <!--end::Pic-->
                        <!--begin::Info-->
                        <div class="flex-grow-1">
                            <!--begin::Title-->
                            <div class="d-flex justify-content-between flex-wrap mt-1">
                                <div class="d-flex mr-3">
                                    <a class="text-dark-75 text-hover-primary font-size-h5 font-weight-bold mr-3">@Model.ProfessionalProfile.Name @Model.ProfessionalProfile.LastName</a>
                                    <a>
                                        <i class="flaticon2-correct text-success font-size-h5"></i>
                                    </a>
                                </div>
                            </div>
                            <!--begin::Content-->
                            <div class="d-flex flex-wrap justify-content-between mt-1">
                                <div class="d-flex flex-column flex-grow-1 pr-8">
                                    <div class="d-flex flex-wrap mb-4">
                                        <a class="text-dark-50 text-hover-primary font-weight-bold mr-lg-8 mr-5 mb-lg-0 mb-2">
                                            <i class="flaticon2-calendar-3 mr-2 font-size-lg"></i>@Model.ProfessionalProfile.Profession

                                        </a>
                                        <a class="text-dark-50 text-hover-primary font-weight-bold">
                                            <i class="flaticon2-placeholder mr-2 font-size-lg"></i>@Model.ProfessionalProfile.City - @Model.ProfessionalProfile.State
                                        </a>
                                    </div>
                                    <span class="font-weight-bold text-dark-50">@Model.ProfessionalProfile.Sobre</span>
                                </div>
                            </div>
                            <!--end::Content-->
                        </div>
                        <!--end::Info-->
                    </div>
                    <!--end::Details-->
                    <div class="separator separator-solid"></div>
                    <!--begin::Items-->
                    <div class="d-flex align-items-center flex-wrap mt-8">
                        <div class="form-group">
                            <label class="text-dark-75 font-weight-bolder font-size-sm">Especialidades</label>
                            <div class="input-group">
                                @foreach (var especiality in Model.ProfessionalProfile.Especiality)
                            {
                                <div class="d-flex">
                                    <span class="label label-primary label-inline font-weight-boldest mr-2 mt-2">@especiality</span>
                                </div>
                            }
                        </div>
                        <!--end: Item-->

                    </div>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <!--end::Item-->
                </div>
                <!--begin::Items-->
            </div>
            <div class="card-footer">
                <div class="col-lg-12">
                   <button type="button" class="btn btn-success btn-shadow font-weight-bold mr-2 col-lg-12" id="@Model.ProfessionalProfile.Perfil" onclick="Interesse('@Model.ProfessionalProfile.Perfil')"><i class="flaticon2-phone icon-md"></i> <i id="spinner"></i>Contato</button>
                </div>
            </div>
        </div>
        <!--end::Card-->
        <!--begin::Row-->
        <div class="row">
            <div class="col-xl-5">
                <!--begin::Mixed Widget 14-->
                <div class="card-stretch gutter-b">
                    <!--begin::Header-->
                    <div class="card card-custom gutter-b">
                        <div class="card-header border-0 pt-5">
                            <h3 class="card-title font-weight-bolder">Reputação</h3>
                        </div>
                        <!--end::Header-->
                        <!--begin::Body-->
                        <div class="card-body d-flex flex-column">
                            <div class="flex-grow-1">
                                <div id="kt_mixed_widget_14_chart" style="height: 200px"></div>
                            </div>
                            <div class="pt-5">
                                <p class="text-center font-weight-normal font-size-lg pb-7">@Model.TextReputationGeneral</p>
                                <input type="text" id="avaliationId" value="@Model.PercentReputationGeneral" hidden />
                            </div>
                        </div>
                    </div>

                    <div class="card card-custom">
                        <!--begin::Header-->
                        <div class="card-header border-0">
                            <h3 class="card-title font-weight-bolder text-dark">Aqui estão alguns detalhes sobre a prestação de serviço de #@Model.ProfessionalProfile.Name com base nas avaliações de seus clientes. </h3>
                        </div>
                        <!--end::Header-->
                        <!--begin::Body-->
                        <div class="card-body pt-0">
                            <!--begin::Item-->
                            <div class="d-flex align-items-center mb-9 bg-light-warning rounded p-5">
                                <!--begin::Icon-->
                                <span class="svg-icon svg-icon-warning mr-3">
                                    <span class="svg-icon svg-icon-lg">
                                        <!--begin::Svg Icon | path:C:\wamp64\www\keenthemes\themes\metronic\theme\html\demo10\dist/../src/media/svg/icons\Home\Timer.svg-->
                                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <rect x="0" y="0" width="24" height="24" />
                                                <path d="M12,21 C7.581722,21 4,17.418278 4,13 C4,8.581722 7.581722,5 12,5 C16.418278,5 20,8.581722 20,13 C20,17.418278 16.418278,21 12,21 Z" fill="#000000" opacity="0.3" />
                                                <path d="M13,5.06189375 C12.6724058,5.02104333 12.3386603,5 12,5 C11.6613397,5 11.3275942,5.02104333 11,5.06189375 L11,4 L10,4 C9.44771525,4 9,3.55228475 9,3 C9,2.44771525 9.44771525,2 10,2 L14,2 C14.5522847,2 15,2.44771525 15,3 C15,3.55228475 14.5522847,4 14,4 L13,4 L13,5.06189375 Z" fill="#000000" />
                                                <path d="M16.7099142,6.53272645 L17.5355339,5.70710678 C17.9260582,5.31658249 18.5592232,5.31658249 18.9497475,5.70710678 C19.3402718,6.09763107 19.3402718,6.73079605 18.9497475,7.12132034 L18.1671361,7.90393167 C17.7407802,7.38854954 17.251061,6.92750259 16.7099142,6.53272645 Z" fill="#000000" />
                                                <path d="M11.9630156,7.5 L12.0369844,7.5 C12.2982526,7.5 12.5154733,7.70115317 12.5355117,7.96165175 L12.9585886,13.4616518 C12.9797677,13.7369807 12.7737386,13.9773481 12.4984096,13.9985272 C12.4856504,13.9995087 12.4728582,14 12.4600614,14 L11.5399386,14 C11.2637963,14 11.0399386,13.7761424 11.0399386,13.5 C11.0399386,13.4872031 11.0404299,13.4744109 11.0414114,13.4616518 L11.4644883,7.96165175 C11.4845267,7.70115317 11.7017474,7.5 11.9630156,7.5 Z" fill="#000000" />
                                            </g>
                                        </svg><!--end::Svg Icon-->
                                    </span>
                                </span>
                                <!--end::Icon-->
                                <!--begin::Title-->
                                <div class="d-flex flex-column flex-grow-1 mr-3">
                                    <a class="font-weight-bold text-dark-75 text-hover-primary font-size-lg mb-1">Prazo</a>
                                    <span class="text-muted font-weight-bold">@Model.TextReputationDeadline</span>
                                </div>
                                <!--end::Title-->
                                <!--begin::Lable-->
                                <span class="font-weight-bolder text-warning py-1 font-size-lg">@Model.PercentReputationDeadline.ToString()%</span>
                                <!--end::Lable-->
                            </div>
                            <!--end::Item-->
                            <!--begin::Item-->
                            <div class="d-flex align-items-center mb-9 bg-light-success rounded p-5 ">
                                <!--begin::Icon-->
                                <span class="svg-icon svg-icon-success mr-3">
                                    <span class="svg-icon svg-icon-lg">
                                        <!--begin::Svg Icon | path:assets/media/svg/icons/Communication/Write.svg-->
                                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <rect x="0" y="0" width="24" height="24" />
                                                <path d="M12.2674799,18.2323597 L12.0084872,5.45852451 C12.0004303,5.06114792 12.1504154,4.6768183 12.4255037,4.38993949 L15.0030167,1.70195304 L17.5910752,4.40093695 C17.8599071,4.6812911 18.0095067,5.05499603 18.0083938,5.44341307 L17.9718262,18.2062508 C17.9694575,19.0329966 17.2985816,19.701953 16.4718324,19.701953 L13.7671717,19.701953 C12.9505952,19.701953 12.2840328,19.0487684 12.2674799,18.2323597 Z" fill="#000000" fill-rule="nonzero" transform="translate(14.701953, 10.701953) rotate(-135.000000) translate(-14.701953, -10.701953)" />
                                                <path d="M12.9,2 C13.4522847,2 13.9,2.44771525 13.9,3 C13.9,3.55228475 13.4522847,4 12.9,4 L6,4 C4.8954305,4 4,4.8954305 4,6 L4,18 C4,19.1045695 4.8954305,20 6,20 L18,20 C19.1045695,20 20,19.1045695 20,18 L20,13 C20,12.4477153 20.4477153,12 21,12 C21.5522847,12 22,12.4477153 22,13 L22,18 C22,20.209139 20.209139,22 18,22 L6,22 C3.790861,22 2,20.209139 2,18 L2,6 C2,3.790861 3.790861,2 6,2 L12.9,2 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" />
                                            </g>
                                        </svg>
                                        <!--end::Svg Icon-->
                                    </span>
                                </span>
                                <!--end::Icon-->
                                <!--begin::Title-->
                                <div class="d-flex flex-column flex-grow-1 mr-3">
                                    <a class="font-weight-bold text-dark-75 text-hover-primary font-size-lg mb-1">Qualidade</a>
                                    <span class="text-muted font-weight-bold">@Model.TextReputationQuality</span>
                                </div>
                                <!--end::Title-->
                                <!--begin::Lable-->
                                <span class="font-weight-bolder text-success py-1 font-size-lg">@Model.PercentReputationQuality.ToString()%</span>
                                <!--end::Lable-->
                            </div>
                            <!--end::Item-->
                            <!--begin::Item-->
                            <div class="d-flex align-items-center bg-light-info rounded p-5">
                                <!--begin::Icon-->
                                <span class="svg-icon svg-icon-info mr-3">
                                    <span class="svg-icon svg-icon-lg">
                                        <!--begin::Svg Icon | path:C:\wamp64\www\keenthemes\themes\metronic\theme\html\demo10\dist/../src/media/svg/icons\Communication\Chat4.svg-->
                                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <rect x="0" y="0" width="24" height="24" />
                                                <path d="M21.9999843,15.009808 L22.0249378,15 L22.0249378,19.5857864 C22.0249378,20.1380712 21.5772226,20.5857864 21.0249378,20.5857864 C20.7597213,20.5857864 20.5053674,20.4804296 20.317831,20.2928932 L18.0249378,18 L5,18 C3.34314575,18 2,16.6568542 2,15 L2,6 C2,4.34314575 3.34314575,3 5,3 L19,3 C20.6568542,3 22,4.34314575 22,6 L22,15 C22,15.0032706 21.9999948,15.0065399 21.9999843,15.009808 Z M6.16794971,10.5547002 C7.67758127,12.8191475 9.64566871,14 12,14 C14.3543313,14 16.3224187,12.8191475 17.8320503,10.5547002 C18.1384028,10.0951715 18.0142289,9.47430216 17.5547002,9.16794971 C17.0951715,8.86159725 16.4743022,8.98577112 16.1679497,9.4452998 C15.0109146,11.1808525 13.6456687,12 12,12 C10.3543313,12 8.9890854,11.1808525 7.83205029,9.4452998 C7.52569784,8.98577112 6.90482849,8.86159725 6.4452998,9.16794971 C5.98577112,9.47430216 5.86159725,10.0951715 6.16794971,10.5547002 Z" fill="#000000" />
                                            </g>
                                        </svg><!--end::Svg Icon-->
                                    </span>
                                </span>
                                <!--end::Icon-->
                                <!--begin::Title-->
                                <div class="d-flex flex-column flex-grow-1 mr-3">
                                    <a class="font-weight-bold text-dark-75 text-hover-primary font-size-lg mb-1">Comunicação</a>
                                    <span class="text-muted font-weight-bold">@Model.TextReputationCommunication</span>
                                </div>
                                <!--end::Title-->
                                <!--begin::Lable-->
                                <span class="font-weight-bolder text-info py-1 font-size-lg">@Model.PercentReputationCommunication.ToString()%</span>
                                <!--end::Lable-->
                            </div>
                            <!--end::Item-->
                        </div>
                        <!--end::Body-->
                    </div>



                    <!--end::Body-->
                </div>

                <!--end::Mixed Widget 14-->
            </div>

            <div class="col-xl-7">
                <form class="form" id="kt_form_update" action="Profile/ProfilePage" method="post" enctype="multipart/form-data">
                    <div class="row">
                        <div class="col-lg-12" style="min-height:980px">
                            <div class="card card-custom card-stretch gutter-b compact">
                                <div class="card-header">
                                    <h3 class="card-title">
                                        Comentários dos clientes(@Model.CountRegister)
                                    </h3>
                                    <input type="text" id="Profile" name="Profile" value="@Model.ProfessionalProfile.Perfil" hidden />
                                </div>
                                <!--begin::Row-->
                                <div class="card-body">
                                    <div asp-area="" class="row" id="listProfessional">
                                        @{
                                            if (Model.WorkerDone.Count == 0)
                                            {
                                                <div class="d-flex flex-column flex-root">
                                                    <!--begin::Error-->
                                                    <div class="error error-5 d-flex flex-row-fluid bgi-size-cover bgi-position-center" style="background-image: url(assets/media/error/bg5.jpg);">
                                                        <!--begin::Content-->
                                                        <div class="container d-flex flex-row-fluid flex-column justify-content-md-center p-12">
                                                            <h1 class="error-title font-weight-boldest text-info mt-10 mt-md-0 mb-12">Oops!</h1>
                                                            <p class="font-weight-boldest display-4">Esse profissional não possui nenhuma avaliação.</p>
                                                        </div>
                                                        <!--end::Content-->
                                                    </div>
                                                    <!--end::Error-->
                                                </div>
                                            }
                                        }
                                        @foreach (var item in Model.WorkerDone)
                                        {
                                            <div class="card card-custom gutter-b col-lg-12">
                                                <div class="card-body">
                                                    <!--begin::Top-->
                                                    <div class="d-flex">
                                                        <!--begin: Info-->
                                                        <div class="flex-grow-1">
                                                            <!--begin::Title-->
                                                            <div class="d-flex align-items-center justify-content-between flex-wrap mt-2">
                                                                <!--begin::User-->
                                                                <div class="mr-3">
                                                                    <!--begin::Name-->
                                                                    <label class="d-flex align-items-center text-dark text-hover-primary font-size-h5 font-weight-bold mr-3">
                                                                        @item.Description

                                                                    </label>
                                                                    <!--end::Name-->
                                                                </div>
                                                            </div>
                                                            <!--begin::Content-->
                                                            <div class="d-flex align-items-center flex-wrap justify-content-between">
                                                                <!--begin::Description-->
                                                                <div class="flex-grow-1 font-weight text-dark-50 py-1 py-lg-1 mr-2" style="font-style: italic">"@item.Comment"</div>
                                                            </div>
                                                            <!--end::Content-->
                                                        </div>
                                                        <!--end::Info-->
                                                    </div>
                                                    <div class="d-flex">
                                                        <!--begin: Info-->
                                                        <div class="flex-grow-1">
                                                            <div class="d-flex align-items-center flex-wrap justify-content-between">
                                                                <!--begin::Description-->
                                                                <div class="d-flex align-items-center flex-lg-fill mr-3 my-2">@item.Name</div>
                                                                <div class="d-flex align-items-center"><i class="flaticon-star text-success icon-md ml-2" style="font-size: 0.91rem !important;"> @item.Avaliation / 5,0</i></div>
                                                            </div>
                                                            <!--end::Content-->
                                                        </div>

                                                        <!--end::Info-->
                                                    </div>
                                                    <div class="d-flex">
                                                        <!--begin: Info-->
                                                        <div class="flex-grow-1">
                                                            <div class="d-flex align-items-center flex-wrap justify-content-between">
                                                                <!--begin::Description-->
                                                                <div class="flex-grow-1 font-weight text-dark-50 py-1 py-lg-1 mr-2" style="font-style: italic; font-size: 9px">Publicado em @item.Created</div>
                                                            </div>
                                                            <!--end::Content-->
                                                        </div>

                                                        <!--end::Info-->
                                                    </div>
                                                </div>
                                            </div>
                                        }

                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center flex-wrap">
                                    <div class="d-flex flex-wrap mr-3">
                                        @{
                                            var anterior = Model.Page - 1 > 0 ? Model.Page - 1 : @Model.Page;

                                            <button class="btn btn-icon btn-sm btn-light-primary mr-2 my-1" name="Page" value="@anterior">
                                                <i class="ki ki-bold-arrow-back icon-xs"></i>
                                            </button>

                                            var pageIndexMenos = Model.Page;
                                            var pageIndexMais = Model.Page;
                                            var contadorMenos = 2;
                                            var contadorMais = 2;
                                            List<int> list = new List<int>();

                                            for (; pageIndexMenos - 1 > 0 && contadorMenos > 0; --contadorMenos)
                                            {
                                                --pageIndexMenos;
                                                list.Add(@pageIndexMenos);

                                            }
                                            var listaOrdernada = list.OrderBy(s => s);

                                            foreach (var pag in listaOrdernada)
                                            {
                                                <button class="btn btn-icon btn-sm border-0 btn-hover-primary mr-2 my-1" name="Page" value="@pag">@pag</button>
                                            }

                                            contadorMais += contadorMenos;
                                            <button class="btn btn-icon btn-sm border-0 btn-hover-primary active mr-2 my-1" name="Page" value="@Model.Page">@Model.Page</button>
                                            int indexMais = @Model.Page + 1;

                                            for (; indexMais <= @Model.PagesSize && contadorMais > 0; indexMais++)
                                            {
                                                --contadorMais;
                                                <button class="btn btn-icon btn-sm border-0 btn-hover-primary mr-2 my-1" name="Page" value="@indexMais">@indexMais</button>
                                            }

                                            var proximo = Model.Page + 1 <= @Model.PagesSize ? Model.Page + 1 : @Model.Page;
                                            <button  class="btn btn-icon btn-sm btn-light-primary mr-2 my-1" name="Page" value="@proximo">
                                                <i class="ki ki-bold-arrow-next icon-xs"></i>
                                            </button>
                                        }

                                    </div>
                                </div>

                                <!--end::Row-->
                                <!--begin::Pagination-->
                                <!--end::Container-->
                            </div>
                        </div>

                    </div>
                </form>
            </div>


        </div>
        <!--end::Row-->
    </div>
</div>

<!--end::Container-->
@section Scripts{
    <!--begin::Global Theme Bundle(used by all pages)-->
    <script>var KTAppSettings = { "breakpoints": { "sm": 576, "md": 768, "lg": 992, "xl": 1200, "xxl": 1200 }, "colors": { "theme": { "base": { "white": "#ffffff", "primary": "#663259", "secondary": "#E5EAEE", "success": "#1BC5BD", "info": "#8950FC", "warning": "#FFA800", "danger": "#F64E60", "light": "#F3F6F9", "dark": "#212121" }, "light": { "white": "#ffffff", "primary": "#F4E1F0", "secondary": "#ECF0F3", "success": "#C9F7F5", "info": "#EEE5FF", "warning": "#FFF4DE", "danger": "#FFE2E5", "light": "#F3F6F9", "dark": "#D6D6E0" }, "inverse": { "white": "#ffffff", "primary": "#ffffff", "secondary": "#212121", "success": "#ffffff", "info": "#ffffff", "warning": "#ffffff", "danger": "#ffffff", "light": "#464E5F", "dark": "#ffffff" } }, "gray": { "gray-100": "#F3F6F9", "gray-200": "#ECF0F3", "gray-300": "#E5EAEE", "gray-400": "#D6D6E0", "gray-500": "#B5B5C3", "gray-600": "#80808F", "gray-700": "#464E5F", "gray-800": "#1B283F", "gray-900": "#212121" } }, "font-family": "Poppins" };</script>

    <script src="assets/plugins/global/plugins.bundle.js"></script>
    <script src="assets/plugins/custom/prismjs/prismjs.bundle.js"></script>
    <script src="assets/js/scripts.bundle.js"></script>
    <script src="assets/js/pages/crud/forms/widgets/select2.js"></script>
    <script src="assets/js/pages/crud/forms/widgets/bootstrap-maxlength.js"></script>
       <script src="~/scripts/Profile/profile.js"></script>
    }
